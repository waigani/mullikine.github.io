<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-11-02 Fri 21:29 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CodeLingo vs Linters</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Shane Mulligan" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://mullikine.github.io/org-main.css"/>
<link rel="stylesheet" type="text/css" href="https://mullikine.github.io/magit.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">CodeLingo vs Linters
<br />
<span class="subtitle">Making parsers for automatic code review</span>
</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org65f086d">1. Making tenets with CLQL that do the job of existing linters</a>
<ul>
<li><a href="#org9dba732">1.1. Defintions taken from the project docs</a></li>
<li><a href="#org1a6d939">1.2. The general process of writing one tenet</a>
<ul>
<li><a href="#org4f64e4c">1.2.1. Writing the CLQL</a></li>
<li><a href="#org859f91f">1.2.2. Writing the unit test</a></li>
</ul>
</li>
<li><a href="#orgc91e220">1.3. Making a new tenet named 'init'</a>
<ul>
<li><a href="#org29976e2">1.3.1. I started by visiting the <span class="underline">CodeLingo Playground</span></a></li>
<li><a href="#orgae4e5cd">1.3.2. The tenet</a></li>
<li><a href="#orgbaba7d7">1.3.3. The test code, <code>example.go</code></a></li>
</ul>
</li>
<li><a href="#orgd1c1ba3">1.4. unconvert</a>
<ul>
<li><a href="#orgf75454c">1.4.1. Visit the CodeLingo Playground</a></li>
<li><a href="#org48c40cb">1.4.2. The tenet</a></li>
<li><a href="#org1a2f2c2">1.4.3. The test code</a></li>
</ul>
</li>
<li><a href="#orgc694256">1.5. tenet vs nofuncflags</a>
<ul>
<li><a href="#org2df2f10">1.5.1. Original CLQL query</a></li>
<li><a href="#org91f2bad">1.5.2. Refined CLQL query</a></li>
<li><a href="#org6aa4796">1.5.3. CLQL query written by Blake</a></li>
<li><a href="#orge1ace03">1.5.4. Difference between Blake's query and my own</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgf3f395b">2. Results</a>
<ul>
<li><a href="#org4fcdf11">2.1. Size comparison</a>
<ul>
<li><a href="#orgcf4dc85">2.1.1. Parser</a></li>
<li><a href="#orga3927af">2.1.2. Unit tests</a></li>
<li><a href="#org30c78e3">2.1.3. Links to source code</a></li>
</ul>
</li>
<li><a href="#orgb1ac99d">2.2. The work it took to write these tenets</a></li>
<li><a href="#orgacaccd0">2.3. The work it took to write their unit tests</a>
<ul>
<li><a href="#orgd3a22cb">2.3.1. Caveats</a></li>
</ul>
</li>
<li><a href="#org9465973">2.4. Conclusions</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org65f086d" class="outline-2">
<h2 id="org65f086d"><span class="section-number-2">1</span> Making tenets with CLQL that do the job of existing linters</h2>
<div class="outline-text-2" id="text-1">
<p>
I started learning Go and CodeLingo / CLQL at the same time, so while I have found it generally easy and straightforward to create these tenets, I feel like I could've knocked them out even faster if I didn't need to look up answers to questions such as '<i>what is an interface in golang?</i>', for example. The process has been intuitive; I think in part to having a good naming convention. I've had to learn what CodeLingo is, what a '<b>tenet</b>' and a '<b>flow</b>' is. Long story short, they are just as what they sound like they are.
</p>
</div>

<div id="outline-container-org9dba732" class="outline-3">
<h3 id="org9dba732"><span class="section-number-3">1.1</span> Defintions taken from the project docs</h3>
<div class="outline-text-3" id="text-1-1">
<dl class="org-dl">
<dt>tenet</dt><dd><p>
A Tenet is an <i>encoded</i> project-specific <span class="underline">best practice</span> used to guide development.
</p>

<p>
(an <b><i>encoded</i> <span class="underline">best practice</span></b>)
</p></dd>

<dt>flow</dt><dd><p>
A Flow is an <i>automated</i> development <span class="underline">workflow</span> that leverages Tenets to do some task, for example automating code reviews.
</p>

<p>
(an <b><i>automated</i> <span class="underline">workflow</span></b>)
</p></dd>
</dl>
</div>
</div>

<div id="outline-container-org1a6d939" class="outline-3">
<h3 id="org1a6d939"><span class="section-number-3">1.2</span> The general process of writing one tenet</h3>
<div class="outline-text-3" id="text-1-2">
<p>
The process of crafting CLQL is mainly subtractive, especially for simple tenets.
What is simple to implement in CodeLingo may be difficult for 3rd party linters, however, as this write-up should demonstrate.
Writing a tenet to describe an antipattern might be trivial in CLQL, but the corresponding linter may be <i><b>orders</b></i> of magnitude more complex.
</p>
</div>

<div id="outline-container-org4f64e4c" class="outline-4">
<h4 id="org4f64e4c"><span class="section-number-4">1.2.1</span> Writing the CLQL</h4>
<div class="outline-text-4" id="text-1-2-1">
</div>
<ol class="org-ol">
<li><a id="orgb68c86f"></a>The <b>first</b> step is usually to generate a verbose CLQL query from the CodeLingo playground.<br />
<div class="outline-text-5" id="text-1-2-1-1">
<p>
To do this you select the part of the code you would like to match and then click the <span class="underline">generate</span><sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup> button.
</p>
</div>
</li>

<li><a id="org8add463"></a>The <b>next</b> step is to refine that query into something that captures the logic of what you want a tenet to match.<br />
<div class="outline-text-5" id="text-1-2-1-2">
<p>
Typically, the generated query comprises the bulk of the code you end up with.  You can therefore choose what to leave in, or add new logic, depending on the needs of the tenet.
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-org859f91f" class="outline-4">
<h4 id="org859f91f"><span class="section-number-4">1.2.2</span> Writing the unit test</h4>
<div class="outline-text-4" id="text-1-2-2">
</div>
<ol class="org-ol">
<li><a id="orgc1bba80"></a>Obtaining test code for the <code>example.go</code> file<br />
<div class="outline-text-5" id="text-1-2-2-1">
<p>
I found <b>'Go by example'</b><sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup> a good place to both learn Go and to obtain test code for tenets.
CodeLingo test code just looks like regular code, except it should contain the thing that the tenet is looking for, and that is usually an anti-pattern. Therefore, this is where you put deliberately bad code.
</p>
</div>
</li>


<li><a id="orgfd97b41"></a>Generating JSON for the "Expected results" file, <code>expected.json</code><br />
<div class="outline-text-5" id="text-1-2-2-2">
<p>
After a review on the CLI, a JSON file is presented. You can just copy and paste this JSON code into a file called <code>expected.json</code>.
</p>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-orgc91e220" class="outline-3">
<h3 id="orgc91e220"><span class="section-number-3">1.3</span> Making a new tenet named 'init'</h3>
<div class="outline-text-3" id="text-1-3">
</div>
<div id="outline-container-org29976e2" class="outline-4">
<h4 id="org29976e2"><span class="section-number-4">1.3.1</span> I started by visiting the <span class="underline"><a href="https://www.codelingo.io/playground/?lang=go">CodeLingo Playground</a></span></h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
A good way to start is by generating some CLQL for the thing you would like to match.
</p>
</div>

<ol class="org-ol">
<li><a id="org5aa6231"></a>Step 1: <b>Generate</b> some CLQL<br />
<ol class="org-ol">
<li><a id="orgc10ac9f"></a>Write an init function into the <span class="underline">Source Code: Go"</span> section<br />
<div class="outline-text-6" id="text-1-3-1-1-1">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">package</span> code <span style="color: #008787; background-color: #262626;">// </span><span style="color: #008787; background-color: #262626;">you also need to say it's part of a package</span>

<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">init</span><span style="color: #268bd2;">()</span> <span style="color: #268bd2;">{</span>
<span style="color: #268bd2;">}</span>
</pre>
</div>
</div>
</li>

<li><a id="orgff5d4a6"></a>Double tap on 'init' to select it.<br /></li>

<li><a id="org35b6618"></a>Click on <span class="underline">Generate Query</span> and copy the resulting CLQL code<br />
<ol class="org-ol">
<li><a id="orgbb0bf25"></a>This is what the button looks like.<br />
<div class="outline-text-7" id="text-1-3-1-1-3-1">

<div class="figure">
<p><img src="generate.png" alt="generate.png" />
</p>
</div>
</div>
</li>

<li><a id="org878a784"></a>This is what the generated CLQL looks like.<br />
<div class="outline-text-7" id="text-1-3-1-1-3-2">
<div class="org-src-container">
<pre class="src src-yaml">import codelingo/ast/go

<span style="color: #8787d7;">go.file(depth = any)</span>:
  <span style="color: #8787d7;">go.decls</span>:
    @playground.highlight
    <span style="color: #8787d7;">go.func_decl</span>:
      <span style="color: #8787d7;">go.ident</span>:
        child_count == 0
        name == <span style="color: #2aa198;">"init"</span>
        private == <span style="color: #2aa198;">"true"</span>
        public == <span style="color: #2aa198;">"false"</span>
      <span style="color: #8787d7;">go.func_type</span>:
        <span style="color: #8787d7;">go.field_list</span>:
          child_count == 0
</pre>
</div>

<dl class="org-dl">
<dt>total clicks</dt><dd>The number of times needed to press <span class="underline">generate query</span></dd>
</dl>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">total clicks</th>
<th scope="col" class="org-left">purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-left">to generate a query that matches an init() function</td>
</tr>
</tbody>
</table>
</div>
</li>
</ol>
</li>
</ol>
</li>

<li><a id="org83d1c3e"></a>Step 2: <b>Refine</b> the CLQL<br />
<div class="outline-text-5" id="text-1-3-1-2">
<div class="org-src-container">
<pre class="src src-yaml">import codelingo/ast/go

<span style="color: #8787d7;">go.file(depth = any)</span>:
  <span style="color: #8787d7;">go.decls</span>:
    <span style="color: #8787d7;">go.func_decl</span>:
      @ review.comment
      <span style="color: #8787d7;">go.ident</span>:
        name == <span style="color: #2aa198;">"init"</span>
      <span style="color: #8787d7;">go.func_type</span>:
        <span style="color: #8787d7;">go.field_list</span>:
          child_count == 0
</pre>
</div>
</div>

<ol class="org-ol">
<li><a id="org088045c"></a>Actions<br />
<div class="outline-text-6" id="text-1-3-1-2-1">
<ul class="org-ul">
<li>Remove <code>@playground.highlight</code></li>
<li>Add <code>@ review.comment</code></li>
<li>Remove things that are not relevant to our query.

<ul class="org-ul">
<li>The first <code>child_count</code> was taken out because we can see that a function definition (<code>go.func_decl</code>) with identifier name equal to "init" (<code>go.ident:</code> <code>name == "init"</code>) is enough to describe a function with name "init".</li>

<li><p>
The second <code>child_count</code> was left in because we'd like to match "init" functions that do not take any parameters.
</p>
<div class="org-src-container">
<pre class="src src-yaml">child_count == 0
</pre>
</div></li>

<li><p>
The visibility assertions in this case are not neccessary. Usually we want the tenet to be able to generalise.
</p>
<div class="org-src-container">
<pre class="src src-yaml">private == <span style="color: #2aa198;">"true"</span>
public == <span style="color: #2aa198;">"false"</span>
</pre>
</div></li>
</ul></li>
</ul>
</div>
</li>

<li><a id="org06ae167"></a>This is the diff of the refinement we made to the CLQL<br />
<div class="outline-text-6" id="text-1-3-1-2-2">
<div class="org-src-container">
<pre>
<span class="magit-diff-hunk-heading">@@ -2,13 +2,10 @@ import codelingo/ast/go
</span><span class="magit-diff-context"> 
 go.file(depth = any):
   go.decls:
</span><span class="magit-diff-removed">-    @playground.highlight
</span><span class="magit-diff-context">     go.func_decl:
</span><span class="magit-diff-added">+      @ review.comment
</span><span class="magit-diff-context">       go.ident:
</span><span class="magit-diff-removed">-        child_count == 0
</span><span class="magit-diff-context">         name == "init"
</span><span class="magit-diff-removed">-        private == "true"
-        public == "false"
</span><span class="magit-diff-context">       go.func_type:
         go.field_list:
           child_count == 0
</span>
</pre>
</div>
</div>
</li>
</ol>
</li>
</ol>
</div>

<div id="outline-container-orgae4e5cd" class="outline-4">
<h4 id="orgae4e5cd"><span class="section-number-4">1.3.2</span> The tenet</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
After indenting with 6 spaces (3 indents), I copied the CLQL into the <code>query:</code> section of a new <code>codelingo.yaml</code> file.
The <code>codelingo.yaml</code> file is the file you might simply call the '<b>tenet</b>'.
</p>

<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #8787d7;">tenets</span>:
  - <span style="color: #8787d7;">name</span>: init
    <span style="color: #8787d7;">doc</span>: |
      <span style="color: #2aa198;">Check that no inits functions are present in Go code.</span>
    <span style="color: #8787d7;">flows</span>:
      <span style="color: #8787d7;">codelingo/review</span>:
        <span style="color: #8787d7;">comment</span>: Init functions cause an import to have a side effects, and side effects are hard to test, reduce readability and increase the complexity of code.
    <span style="color: #8787d7;">query</span>: |
      <span style="color: #2aa198;">import codelingo/ast/go</span>

<span style="color: #2aa198;">      go.file(depth = any):</span>
<span style="color: #2aa198;">        go.decls:</span>
<span style="color: #2aa198;">          go.func_decl:</span>
<span style="color: #2aa198;">            @ review.comment</span>
<span style="color: #2aa198;">            go.ident:</span>
              name == <span style="color: #2aa198;">"init"</span>
<span style="color: #2aa198;">            go.func_type:</span>
<span style="color: #2aa198;">              go.field_list:</span>
<span style="color: #2aa198;">                child_count == 0</span>
</pre>
</div>

<p>
There are 3 more files that typically go into making a full-featured tenet.
</p>
</div>

<ol class="org-ol">
<li><a id="orgbb5503b"></a><span class="done DONE">DONE</span> <br />
<div class="outline-text-5" id="text-1-3-2-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">filename</th>
<th scope="col" class="org-left">purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>codelingo.yaml</code></td>
<td class="org-left">The effectual bit. A <span class="underline">description</span> of what the tenet does <b>+</b> the <span class="underline">code</span> to make it happen.</td>
</tr>
</tbody>
</table>
</div>
</li>

<li><a id="org1421a9b"></a><span class="todo TODO">TODO</span> <br />
<div class="outline-text-5" id="text-1-3-2-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">filename</th>
<th scope="col" class="org-left">purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>example.go</code></td>
<td class="org-left">Example of broken code, which is found by the tenet. this and <code>expected.json</code> comprise a unit test for the tenet.</td>
</tr>

<tr>
<td class="org-left"><code>expected.json</code></td>
<td class="org-left">Expected output of the CodeLingo reviewer.</td>
</tr>

<tr>
<td class="org-left"><code>README.md</code></td>
<td class="org-left">An explanation of what bundle this tenet belongs to.</td>
</tr>
</tbody>
</table>
</div>
</li>
</ol>
</div>

<div id="outline-container-orgbaba7d7" class="outline-4">
<h4 id="orgbaba7d7"><span class="section-number-4">1.3.3</span> The test code, <code>example.go</code></h4>
<div class="outline-text-4" id="text-1-3-3">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">package</span> code

<span style="color: #268bd2; font-weight: bold;">var</span> myVar = <span style="color: #d75fd7;">0</span>

<span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">S</span> <span style="color: #268bd2; font-weight: bold;">struct</span><span style="color: #268bd2;">{}</span>

<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #268bd2;">(</span>s <span style="color: #df005f; font-weight: bold;">S</span><span style="color: #268bd2;">)</span> <span style="color: #d75fd7; font-weight: bold;">init</span><span style="color: #268bd2;">(</span>arg <span style="color: #df005f; font-weight: bold;">string</span><span style="color: #268bd2;">)</span> <span style="color: #df005f; font-weight: bold;">bool</span> <span style="color: #268bd2;">{</span>
        yourVar := <span style="color: #d75fd7;">true</span>
        <span style="color: #268bd2; font-weight: bold;">return</span> yourVar
<span style="color: #268bd2;">}</span>

<span style="color: #268bd2; font-weight: bold;">var</span> theVar = <span style="color: #d75fd7;">true</span>

<span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">S</span> <span style="color: #268bd2; font-weight: bold;">struct</span><span style="color: #268bd2;">{}</span>

<span style="color: #268bd2; font-weight: bold;">const</span> constant = <span style="color: #d75fd7;">0</span>

<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">function</span><span style="color: #268bd2;">(</span>arg <span style="color: #df005f; font-weight: bold;">string</span><span style="color: #268bd2;">)</span> <span style="color: #df005f; font-weight: bold;">bool</span> <span style="color: #268bd2;">{</span>
        yourVar := <span style="color: #d75fd7;">true</span>
        <span style="color: #268bd2; font-weight: bold;">return</span> yourVar
<span style="color: #268bd2;">}</span>

<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">init</span><span style="color: #268bd2;">()</span> <span style="color: #268bd2;">{</span>
<span style="color: #268bd2;">}</span>

<span style="color: #268bd2; font-weight: bold;">type</span> <span style="color: #df005f; font-weight: bold;">S</span> <span style="color: #268bd2; font-weight: bold;">struct</span><span style="color: #268bd2;">{}</span>

<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">function</span><span style="color: #268bd2;">()</span> <span style="color: #268bd2;">{</span>
        init := <span style="color: #268bd2; font-weight: bold;">func</span><span style="color: #d75fd7;">()</span> <span style="color: #d75fd7;">{}</span>
        <span style="color: #d75fd7; font-weight: bold;">init</span><span style="color: #d75fd7;">()</span>
<span style="color: #268bd2;">}</span>

<span style="color: #268bd2; font-weight: bold;">var</span> _ = <span style="color: #d75fd7;">0</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd1c1ba3" class="outline-3">
<h3 id="orgd1c1ba3"><span class="section-number-3">1.4</span> unconvert</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-orgf75454c" class="outline-4">
<h4 id="orgf75454c"><span class="section-number-4">1.4.1</span> Visit the CodeLingo Playground</h4>
<div class="outline-text-4" id="text-1-4-1">
</div>
<ol class="org-ol">
<li><a id="org7c0e6e6"></a>Generate some CLQL<br />
<ol class="org-ol">
<li><a id="org4fff435"></a>Write the antipattern into the <span class="underline">Source Code: Go"</span> section<br />
<div class="outline-text-6" id="text-1-4-1-1-1">
<p>
We dont want to use the <code>float64()</code> type-conversion function on a variable we already know is a float.
Honestly, this wasn't hard to write.
</p>

<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">main</span><span style="color: #268bd2;">()</span> <span style="color: #268bd2;">{</span>
        <span style="color: #268bd2; font-weight: bold;">var</span> f float64
        fmt.<span style="color: #d75fd7; font-weight: bold;">Printf</span><span style="color: #d75fd7;">(</span><span style="color: #2aa198;">"%t\n"</span>, !math.<span style="color: #d75fd7; font-weight: bold;">IsNaN</span><span style="color: #2aa198;">(</span><span style="color: #d75fd7; font-weight: bold;">float64</span><span style="color: #67b11d;">(</span>f<span style="color: #67b11d;">)</span><span style="color: #2aa198;">)</span><span style="color: #d75fd7;">)</span>
<span style="color: #268bd2;">}</span>
</pre>
</div>
</div>
</li>

<li><a id="org3757f16"></a>Click on <span class="underline">Generate Query</span> and copy the resulting CLQL code<br />
<ol class="org-ol">
<li><a id="org63048f2"></a>This is what the generated CLQL looks like.<br /></li>
</ol>
</li>
</ol>
</li>
</ol>
</div>

<div id="outline-container-org48c40cb" class="outline-4">
<h4 id="org48c40cb"><span class="section-number-4">1.4.2</span> The tenet</h4>
<div class="outline-text-4" id="text-1-4-2">
<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #8787d7;">tenets</span>:
  - <span style="color: #8787d7;">name</span>: unconvert
    <span style="color: #8787d7;">doc</span>: |
      <span style="color: #2aa198;">Identify unnecessary type conversions</span>
    <span style="color: #8787d7;">flows</span>:
      <span style="color: #8787d7;">codelingo/review</span>:
        <span style="color: #8787d7;">comment</span>: Unnecessary type conversion <span style="color: #268bd2;">{</span><span style="color: #d75fd7;">{</span>name<span style="color: #d75fd7;">}</span><span style="color: #268bd2;">}</span>; i.e., expression <span style="color: #268bd2;">{</span><span style="color: #d75fd7;">{</span>name<span style="color: #d75fd7;">}</span><span style="color: #268bd2;">}</span>(x) where x already has type <span style="color: #268bd2;">{</span><span style="color: #d75fd7;">{</span>name<span style="color: #d75fd7;">}</span><span style="color: #268bd2;">}</span>.
    <span style="color: #8787d7;">query</span>: |
      <span style="color: #2aa198;">import codelingo/ast/go</span>
<span style="color: #2aa198;">      go.file(depth = any):</span>
<span style="color: #2aa198;">        go.call_expr(depth = any):</span>
<span style="color: #2aa198;">          go.ident:</span>
<span style="color: #2aa198;">            @ review.vars.name</span>
<span style="color: #2aa198;">            name as typeName</span>
<span style="color: #2aa198;">          go.args:</span>
<span style="color: #2aa198;">            @ review.comment</span>
<span style="color: #2aa198;">            go.ident:</span>
<span style="color: #2aa198;">              type == typeName</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org1a2f2c2" class="outline-4">
<h4 id="org1a2f2c2"><span class="section-number-4">1.4.3</span> The test code</h4>
<div class="outline-text-4" id="text-1-4-3">
<div class="org-src-container">
<pre class="src src-go"><span style="color: #268bd2; font-weight: bold;">package</span> main

<span style="color: #268bd2; font-weight: bold;">import</span> <span style="color: #2aa198;">"fmt"</span>
<span style="color: #268bd2; font-weight: bold;">import</span> <span style="color: #2aa198;">"math"</span>

<span style="color: #268bd2; font-weight: bold;">func</span> <span style="color: #d75fd7; font-weight: bold;">main</span><span style="color: #268bd2;">()</span> <span style="color: #268bd2;">{</span>
        <span style="color: #268bd2; font-weight: bold;">var</span> f float64
        <span style="color: #268bd2; font-weight: bold;">var</span> f32 float32
        <span style="color: #268bd2; font-weight: bold;">var</span> f64 float64
        fmt.<span style="color: #d75fd7; font-weight: bold;">Printf</span><span style="color: #d75fd7;">(</span><span style="color: #2aa198;">"%t\n"</span>, !math.<span style="color: #d75fd7; font-weight: bold;">IsNaN</span><span style="color: #2aa198;">(</span><span style="color: #d75fd7; font-weight: bold;">float64</span><span style="color: #67b11d;">(</span>f<span style="color: #67b11d;">)</span><span style="color: #2aa198;">)</span><span style="color: #d75fd7;">)</span>
        fmt.<span style="color: #d75fd7; font-weight: bold;">Printf</span><span style="color: #d75fd7;">(</span><span style="color: #2aa198;">"%t\n"</span>, !math.<span style="color: #d75fd7; font-weight: bold;">IsNaN</span><span style="color: #2aa198;">(</span><span style="color: #d75fd7; font-weight: bold;">float64</span><span style="color: #67b11d;">(</span>f32<span style="color: #67b11d;">)</span><span style="color: #2aa198;">)</span><span style="color: #d75fd7;">)</span>
        fmt.<span style="color: #d75fd7; font-weight: bold;">Printf</span><span style="color: #d75fd7;">(</span><span style="color: #2aa198;">"%t\n"</span>, !math.<span style="color: #d75fd7; font-weight: bold;">IsNaN</span><span style="color: #2aa198;">(</span><span style="color: #d75fd7; font-weight: bold;">float64</span><span style="color: #67b11d;">(</span>f64<span style="color: #67b11d;">)</span><span style="color: #2aa198;">)</span><span style="color: #d75fd7;">)</span>
<span style="color: #268bd2;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc694256" class="outline-3">
<h3 id="orgc694256"><span class="section-number-3">1.5</span> tenet vs nofuncflags</h3>
<div class="outline-text-3" id="text-1-5">
</div>
<div id="outline-container-org2df2f10" class="outline-4">
<h4 id="org2df2f10"><span class="section-number-4">1.5.1</span> Original CLQL query</h4>
<div class="outline-text-4" id="text-1-5-1">
<div class="org-src-container">
<pre class="src src-yaml">import codelingo/ast/go

<span style="color: #8787d7;">go.file(depth = any)</span>:
  <span style="color: #8787d7;">go.decls</span>:
    <span style="color: #8787d7;">go.func_decl</span>:
      <span style="color: #8787d7;">go.func_type</span>:
        <span style="color: #8787d7;">go.field_list</span>:
          @playground.highlight
          <span style="color: #8787d7;">go.field</span>:
            <span style="color: #8787d7;">go.names</span>:
              <span style="color: #8787d7;">go.ident</span>:
                child_count == 0
                name == <span style="color: #2aa198;">"aFlag"</span>
                private == <span style="color: #2aa198;">"true"</span>
                public == <span style="color: #2aa198;">"false"</span>
                type == <span style="color: #2aa198;">"bool"</span>
            <span style="color: #8787d7;">go.ident</span>:
              child_count == 0
              name == <span style="color: #2aa198;">"bool"</span>
              private == <span style="color: #2aa198;">"true"</span>
              public == <span style="color: #2aa198;">"false"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org91f2bad" class="outline-4">
<h4 id="org91f2bad"><span class="section-number-4">1.5.2</span> Refined CLQL query</h4>
<div class="outline-text-4" id="text-1-5-2">
<div class="org-src-container">
<pre class="src src-yaml">import codelingo/ast/go

<span style="color: #8787d7;">go.func_decl(depth = any)</span>:
  <span style="color: #8787d7;">go.func_type</span>:
    <span style="color: #8787d7;">go.field_list</span>:
      <span style="color: #8787d7;">go.field</span>:
        <span style="color: #8787d7;">go.names</span>:
          @ review.comment
          <span style="color: #8787d7;">go.ident</span>:
            type == <span style="color: #2aa198;">"bool"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6aa4796" class="outline-4">
<h4 id="org6aa4796"><span class="section-number-4">1.5.3</span> CLQL query written by Blake</h4>
<div class="outline-text-4" id="text-1-5-3">
<div class="org-src-container">
<pre class="src src-yaml">import codelingo/ast/go

@ review.comment
<span style="color: #8787d7;">go.func_decl(depth = any)</span>:
  <span style="color: #8787d7;">go.func_type</span>:
    <span style="color: #8787d7;">go.field_list</span>:
      <span style="color: #8787d7;">go.field</span>:
        <span style="color: #8787d7;">go.names</span>:
          <span style="color: #8787d7;">go.ident</span>:
            type == <span style="color: #2aa198;">"bool"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge1ace03" class="outline-4">
<h4 id="orge1ace03"><span class="section-number-4">1.5.4</span> Difference between Blake's query and my own</h4>
<div class="outline-text-4" id="text-1-5-4">
<p>
The only difference between our queries was the position of the <code>@ review.comment</code>.
</p>

<div class="org-src-container">
<pre class="src src-diff"><span style="color: #d75fd7; background-color: #333333;">2a3</span>
<span style="color: #67b11d;">&gt;</span><span style="color: #dc752f;"> </span><span style="color: #67b11d;">@</span><span style="color: #dc752f;"> </span><span style="color: #67b11d;">review.comment</span>
<span style="color: #d75fd7; background-color: #333333;">8d8</span>
&lt;<span style="color: #dc752f;">           </span>@<span style="color: #dc752f;"> </span>review.comment
</pre>
</div>

<p>
They are functionally equivalent, though.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf3f395b" class="outline-2">
<h2 id="orgf3f395b"><span class="section-number-2">2</span> Results</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org4fcdf11" class="outline-3">
<h3 id="org4fcdf11"><span class="section-number-3">2.1</span> Size comparison</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Here I compare the amount of code written to make the tenets vs the linters I modelled them from.
</p>
</div>
<div id="outline-container-orgcf4dc85" class="outline-4">
<h4 id="orgcf4dc85"><span class="section-number-4">2.1.1</span> Parser</h4>
<div class="outline-text-4" id="text-2-1-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Lines (CL)</th>
<th scope="col" class="org-right">Lines (L)</th>
<th scope="col" class="org-right">Words (CL)</th>
<th scope="col" class="org-right">Words (L)</th>
<th scope="col" class="org-right">Bytes (CL)</th>
<th scope="col" class="org-right">Bytes (L)</th>
<th scope="col" class="org-right">Byte % (CL/L)</th>
<th scope="col" class="org-left">Tenet name (CL)</th>
<th scope="col" class="org-left">linter name (L)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">18</td>
<td class="org-right">681</td>
<td class="org-right">49</td>
<td class="org-right">2084</td>
<td class="org-right">524</td>
<td class="org-right">15616</td>
<td class="org-right">3.36%</td>
<td class="org-left">unconvert</td>
<td class="org-left">unconvert</td>
</tr>

<tr>
<td class="org-right">19</td>
<td class="org-right">110</td>
<td class="org-right">64</td>
<td class="org-right">275</td>
<td class="org-right">580</td>
<td class="org-right">2198</td>
<td class="org-right">26.39%</td>
<td class="org-left">init</td>
<td class="org-left">gochecknoinits</td>
</tr>

<tr>
<td class="org-right">18</td>
<td class="org-right">136</td>
<td class="org-right">67</td>
<td class="org-right">353</td>
<td class="org-right">623</td>
<td class="org-right">2307</td>
<td class="org-right">27.00%</td>
<td class="org-left">bool-param</td>
<td class="org-left">nofuncflags</td>
</tr>

<tr>
<td class="org-right">18</td>
<td class="org-right">137</td>
<td class="org-right">63</td>
<td class="org-right">310</td>
<td class="org-right">512</td>
<td class="org-right">2168</td>
<td class="org-right">23.62%</td>
<td class="org-left">todo</td>
<td class="org-left">godox</td>
</tr>

<tr>
<td class="org-right">42</td>
<td class="org-right">753</td>
<td class="org-right">115</td>
<td class="org-right">2387</td>
<td class="org-right">1154</td>
<td class="org-right">20307</td>
<td class="org-right">5.68%</td>
<td class="org-left">tested</td>
<td class="org-left">blanket</td>
</tr>
</tbody>
</table>


<div class="figure">
<p><img src="clvsl.png" alt="clvsl.png" class="graph" />
</p>
</div>


<dl class="org-dl">
<dt>CL</dt><dd>CodeLingo</dd>
<dt>L</dt><dd>Linter</dd>
</dl>
</div>
</div>

<div id="outline-container-orga3927af" class="outline-4">
<h4 id="orga3927af"><span class="section-number-4">2.1.2</span> Unit tests</h4>
<div class="outline-text-4" id="text-2-1-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Lines (CL)</th>
<th scope="col" class="org-right">Lines (L)</th>
<th scope="col" class="org-right">Words (CL)</th>
<th scope="col" class="org-right">Words (L)</th>
<th scope="col" class="org-right">Bytes (CL)</th>
<th scope="col" class="org-right">Bytes (L)</th>
<th scope="col" class="org-right">Byte % (CL/L)</th>
<th scope="col" class="org-left">Tenet name (CL)</th>
<th scope="col" class="org-left">linter name (L)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">13</td>
<td class="org-right"><span class="underline">N/A</span><sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup></td>
<td class="org-right">25</td>
<td class="org-right"><span class="underline">N/A</span><sup><a id="fnr.3.100" class="footref" href="#fn.3">3</a></sup></td>
<td class="org-right">246</td>
<td class="org-right"><span class="underline">N/A</span><sup><a id="fnr.3.100" class="footref" href="#fn.3">3</a></sup></td>
<td class="org-right"><span class="underline">N/A</span><sup><a id="fnr.3.100" class="footref" href="#fn.3">3</a></sup></td>
<td class="org-left">unconvert</td>
<td class="org-left">unconvert</td>
</tr>

<tr>
<td class="org-right">32</td>
<td class="org-right">201</td>
<td class="org-right">64</td>
<td class="org-right">407</td>
<td class="org-right">333</td>
<td class="org-right">3167</td>
<td class="org-right">10.51%</td>
<td class="org-left">init</td>
<td class="org-left">gochecknoinits</td>
</tr>

<tr>
<td class="org-right">16</td>
<td class="org-right">24</td>
<td class="org-right">27</td>
<td class="org-right">36</td>
<td class="org-right">166</td>
<td class="org-right">261</td>
<td class="org-right">63.60%</td>
<td class="org-left">bool-param</td>
<td class="org-left">nofuncflags</td>
</tr>

<tr>
<td class="org-right">29</td>
<td class="org-right">130</td>
<td class="org-right">80</td>
<td class="org-right">407</td>
<td class="org-right">440</td>
<td class="org-right">3000</td>
<td class="org-right">14.67%</td>
<td class="org-left">todo</td>
<td class="org-left">godox</td>
</tr>

<tr>
<td class="org-right">14</td>
<td class="org-right">124</td>
<td class="org-right">25</td>
<td class="org-right">185</td>
<td class="org-right">156</td>
<td class="org-right">1229</td>
<td class="org-right">12.69%</td>
<td class="org-left">tested</td>
<td class="org-left">blanket</td>
</tr>
</tbody>
</table>

<dl class="org-dl">
<dt>N/A</dt><dd>The original linter did not contain unit tests.</dd>
</dl>
</div>
</div>

<div id="outline-container-org30c78e3" class="outline-4">
<h4 id="org30c78e3"><span class="section-number-4">2.1.3</span> Links to source code</h4>
<div class="outline-text-4" id="text-2-1-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">tenet name</th>
<th scope="col" class="org-left">linter name</th>
<th scope="col" class="org-left">tenet code</th>
<th scope="col" class="org-left">forge</th>
<th scope="col" class="org-left">linter code</th>
<th scope="col" class="org-left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">init</td>
<td class="org-left">gochecknoinits</td>
<td class="org-left"><a href="https://github.com/codelingo/codelingo/blob/master/tenets/codelingo/go/init/codelingo.yaml">codelingo.yaml</a></td>
<td class="org-left">GitHub</td>
<td class="org-left"><a href="https://github.com/leighmcculloch/gochecknoinits">leighmcculloch/gochecknoinits</a></td>
<td class="org-left">Check that no init functions are present in Go code.</td>
</tr>

<tr>
<td class="org-left">unconvert</td>
<td class="org-left">unconvert</td>
<td class="org-left"><a href="https://github.com/codelingo/codelingo/blob/master/tenets/codelingo/go/unconvert/codelingo.yaml">codelingo.yaml</a></td>
<td class="org-left">GitHub</td>
<td class="org-left"><a href="https://github.com/mdempsky/unconvert/">mdempsky/unconvert</a></td>
<td class="org-left">Remove unnecessary type conversions from Go source</td>
</tr>

<tr>
<td class="org-left">bool-param</td>
<td class="org-left">nofuncflags</td>
<td class="org-left"><a href="https://github.com/mullikine/codelingo/blob/master/tenets/codelingo/go/bool-param/codelingo.yaml">codelingo.yaml</a></td>
<td class="org-left">GitHub</td>
<td class="org-left"><a href="https://github.com/fsamin/nofuncflags">fsamin/nofuncflags</a></td>
<td class="org-left">because flag arguments are ugly</td>
</tr>

<tr>
<td class="org-left">todo</td>
<td class="org-left">godox</td>
<td class="org-left"><a href="https://github.com/mullikine/codelingo/blob/master/tenets/codelingo/go/todo/codelingo.yaml">codelingo.yaml</a></td>
<td class="org-left">GitHub</td>
<td class="org-left"><a href="https://github.com/766b/godox/">766b/godox</a></td>
<td class="org-left">extract speficic comments from Go code based on keywords</td>
</tr>

<tr>
<td class="org-left">tested<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup></td>
<td class="org-left">blanket<sup><a id="fnr.4.100" class="footref" href="#fn.4">4</a></sup></td>
<td class="org-left"><a href="https://github.com/codelingo/codelingo/blob/master/tenets/codelingo/go/tested/codelingo.yaml">codelingo.yaml</a></td>
<td class="org-left">GitLab</td>
<td class="org-left"><a href="https://gitlab.com/verygoodsoftwarenotvirus/blanket">verygoodsoftwarenotvirus/blanket</a></td>
<td class="org-left">a coverage helper tool</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-orgb1ac99d" class="outline-3">
<h3 id="orgb1ac99d"><span class="section-number-3">2.2</span> The work it took to write these tenets</h3>
<div class="outline-text-3" id="text-2-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">tenet name</th>
<th scope="col" class="org-left">time to write</th>
<th scope="col" class="org-right">min clicks</th>
<th scope="col" class="org-right">actual clicks<sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup></th>
<th scope="col" class="org-left">reason for <b>generate query</b><sup><a id="fnr.1.100" class="footref" href="#fn.1">1</a></sup> click/s</th>
<th scope="col" class="org-left">reason for time spent greater or less than 10 mins</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">init</td>
<td class="org-left">10 mins</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">to find an initial fact for a top-level init function</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">unconvert</td>
<td class="org-left">20 mins</td>
<td class="org-right">1</td>
<td class="org-right">2</td>
<td class="org-left">to generalise unit test to any type conversion</td>
<td class="org-left">to create string variable to match function name with ident type</td>
</tr>

<tr>
<td class="org-left">bool-param<sup><a id="fnr.6" class="footref" href="#fn.6">6</a></sup></td>
<td class="org-left">5 mins</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">to generate initial query</td>
<td class="org-left">the generated query was ~= the finished tenet</td>
</tr>

<tr>
<td class="org-left">todo</td>
<td class="org-left">10 mins</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">to find the CLQL fact for comment</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">tested<sup><a id="fnr.4.100" class="footref" href="#fn.4">4</a></sup></td>
<td class="org-left">20 mins</td>
<td class="org-right">1</td>
<td class="org-right">2</td>
<td class="org-left">to find the initial query for a filename with identifier</td>
<td class="org-left">learning to use CLQL functions</td>
</tr>
</tbody>
</table>

<dl class="org-dl">
<dt>min clicks</dt><dd>The number of times I needed to press <span class="underline">generate query</span><sup><a id="fnr.1.100" class="footref" href="#fn.1">1</a></sup> to discover the CLQL syntax I needed.</dd>
<dt>actual clicks</dt><dd>The approximate number of times I ended up to pressing <span class="underline">generate query</span>, for exploratory purposes.</dd>
</dl>
</div>
</div>


<div id="outline-container-orgacaccd0" class="outline-3">
<h3 id="orgacaccd0"><span class="section-number-3">2.3</span> The work it took to write their unit tests</h3>
<div class="outline-text-3" id="text-2-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">tenet name</th>
<th scope="col" class="org-left">time to write<sup><a id="fnr.5.100" class="footref" href="#fn.5">5</a></sup></th>
<th scope="col" class="org-right"><span class="underline">generate</span><sup><a id="fnr.1.100" class="footref" href="#fn.1">1</a></sup> clicks<sup><a id="fnr.5.100" class="footref" href="#fn.5">5</a></sup></th>
<th scope="col" class="org-left">additional time</th>
<th scope="col" class="org-left">reason for additional time</th>
<th scope="col" class="org-right">test runs<sup><a id="fnr.8" class="footref" href="#fn.8">8</a></sup></th>
<th scope="col" class="org-left">reason for additional testing of unit tests</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">init</td>
<td class="org-left">10 mins</td>
<td class="org-right">1</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">2</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">unconvert</td>
<td class="org-left">10 mins</td>
<td class="org-right">2</td>
<td class="org-left">10 mins</td>
<td class="org-left">to find example code for unit test</td>
<td class="org-right">2</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">bool-param</td>
<td class="org-left">5 mins</td>
<td class="org-right">1</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">2</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">todo</td>
<td class="org-left">10 mins</td>
<td class="org-right">1</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">2</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">tested<sup><a id="fnr.4.100" class="footref" href="#fn.4">4</a></sup></td>
<td class="org-left">20 mins</td>
<td class="org-right">1</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">4</td>
<td class="org-left">ensure multi-file unit tests are working as expected</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-orgd3a22cb" class="outline-4">
<h4 id="orgd3a22cb"><span class="section-number-4">2.3.1</span> Caveats</h4>
<div class="outline-text-4" id="text-2-3-1">
</div>
<ol class="org-ol">
<li><a id="org0abc808"></a>unconvert<br />
<div class="outline-text-5" id="text-2-3-1-1">
<ul class="org-ul">
<li><p>
This linter did not have any unit tests that I could use in the creation of the tenet.
</p>

<p>
I ran the original linter on a repository to find an example of what to put into a unit test.
</p></li>
</ul>
</div>
</li>

<li><a id="orgc2674fc"></a>blanket<br />
<div class="outline-text-5" id="text-2-3-1-2">
<ul class="org-ul">
<li><p>
Blanket has a limitation.
</p>

<p>
It can handle single-level selector expressions with great ease, but it doesn't recursively dive into those selectors for a number of reasons.
</p>

<p>
The tenet 'tested' doesn't look at the function call to make sure it is the same object that is calling. It only checks that the method being called has the same name and that it is being called within a test function and file of appropriate name.
</p>

<p>
It can, however, find if said method was called with arbitrary nesting.
</p>

<p>
So it doesn't have the same recursive limitation as blanket, but may give rise to false positives in some circumstances.
</p></li>
</ul>
</div>
</li>
</ol>
</div>
</div>


<div id="outline-container-org9465973" class="outline-3">
<h3 id="org9465973"><span class="section-number-3">2.4</span> Conclusions</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Even though the <code>bool-param</code> tenet was already made by Blake, it took no longer than 10 minutes for myself, a total newbie, to make.
</p>

<p>
What's even more astonishing is our queries are functionally equivalent and that <i>CLQL</i> is clever enough to do what we both mean with regards to the position of the comment, even though we had specified the location of the <code>@ review.comment</code> in different places.
</p>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
This is what the button looks like.
<img src="generate.png" alt="generate.png" />
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="https://gobyexample.com/interfaces">Go by Example: Interfaces</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
The original linter did not contain unit tests.
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
See caveats.
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara"><p class="footpara">
These are approximations.
</p></div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara"><p class="footpara">
This tenet was a double-up of an existing tenet <sup><a id="fnr.7" class="footref" href="#fn.7">7</a></sup>.
</p></div></div>

<div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7">7</a></sup> <div class="footpara"><p class="footpara">
This tenet was made, originally by Blake. <a href="https://github.com/codelingo/codelingo/blob/master/tenets/codelingo/go/bool-param/codelingo.yaml">codelingo/codelingo.yaml at master  codelingo/codelingo  GitHub</a>.
</p></div></div>

<div class="footdef"><sup><a id="fn.8" class="footnum" href="#fnr.8">8</a></sup> <div class="footpara"><p class="footpara">
The number of times I had to <b>test</b> the tenet.
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="date">Date: 2018-10-05 Fri 00:00</p>
<p class="author">Author: Shane Mulligan</p>
<p class="date">Created: 2018-11-02 Fri 21:29</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>